<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>Manipulate Tasks via SkySQL Manager API</title>
	<link href="testresources/css/default.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
	  <div id="header">
		  <div id="logo">
			<h1><a href="#">Manager API</a></h1>
			<p><span>Read about it and try it out</span></p>
		  </div>
		  <div id="menu">
			<ul>
			  <li><a href="index.html">About</a></li>
			  <li><a href="systemform.html">System</a></li>
			  <li><a href="nodeform.html">Node</a></li>
			  <li><a href="userform.html">User</a></li>
			  <li><a href="backupform.html">Backup</a></li>
			  <li><a href="monitorform.html">Monitor</a></li>
			  <li class="active"><a href="jobform.html">Task</a></li>
			</ul>
		  </div>
	  </div>	
	<div id="page">
	<div id="content">
      <h2>Task Management via SkySQL Manager API</h2>
	  <div class="section">
	  <h3>Get all Node Commands</h3>
	  <form action="" method="post" id="getcommands" target="apiresults" onsubmit="return(setFields(this.id,'command'));window.open('', 'apiresults', 'width=450,height=300,status=yes,resizable=yes,scrollbars=yes');">
		<p class="explain">
			The HTTP method to be used is: 
			<input type="text" name="_method" value="GET" size="6" readonly="readonly" /><br />
			URI will be /command <br />
			Parameter: 
			<a class="tooltip" href="#">fields,<span class="custom info">
			<img src="testresources/images/Info.png" alt="Fields parameter" height="48" width="48" />
			<strong>fields</strong><br />
			A comma separated list of field names to be returned, others will be omitted.
			</span></a>&nbsp;
			<br />
			Default: All fields <br />
		</p>
		<p class="formfields">
			<label for="fields">Fields to return</label>
			<input type="text" name="fields" id="fields" /><br />
			<input type="submit" class="submit" value="List" />
			<input type="hidden" name="_accept" value="application/json" />
			<!-- The following two inputs will be set automatically -->
			<input type="hidden" name="HTTP_DATE" /><br />
			<input type="hidden" name="HTTP_AUTHORIZATION" />
		</p>
	  </form>
	  </div>
	  <div class="section">
	  <h3>Get all Command States</h3>
	  <form action="" method="post" id="getcommandstates" target="apiresults" onsubmit="return(setFields(this.id,'command','uri1'));window.open('', 'apiresults', 'width=450,height=300,status=yes,resizable=yes,scrollbars=yes');">
		<p class="explain">
			The HTTP method to be used is: 
			<input type="text" name="_method" value="GET" size="6" readonly="readonly" /><br />
			URI will be /command/state <br />
			Parameters: none <br />
		</p>
		<p class="formfields">
			<input type="hidden" name="uri1" value="state" /><br />
			<input type="submit" class="submit" value="List" />
			<input type="hidden" name="_accept" value="application/json" />
			<!-- The following two inputs will be set automatically -->
			<input type="hidden" name="HTTP_DATE" /><br />
			<input type="hidden" name="HTTP_AUTHORIZATION" />
		</p>
	  </form>
	  </div>
	  <div class="section">
	  <h3>Get all Command Steps</h3>
	  <form action="" method="post" id="getcommandsteps" target="apiresults" onsubmit="return(setFields(this.id,'command','uri1'));window.open('', 'apiresults', 'width=450,height=300,status=yes,resizable=yes,scrollbars=yes');">
		<p class="explain">
			The HTTP method to be used is: 
			<input type="text" name="_method" value="GET" size="6" readonly="readonly" /><br />
			URI will be /command/step <br />
			Parameters: none <br />
		</p>
		<p class="formfields">
			<input type="hidden" name="uri1" value="step" /><br />
			<input type="submit" class="submit" value="List" />
			<input type="hidden" name="_accept" value="application/json" />
			<!-- The following two inputs will be set automatically -->
			<input type="hidden" name="HTTP_DATE" /><br />
			<input type="hidden" name="HTTP_AUTHORIZATION" />
		</p>
	  </form>
	  </div>
	  <div class="section">
	  <h3>Run a Command</h3>
	  <form action="" method="post" id="runcommand" target="apiresults" onsubmit="return(setFields(this.id,'command','uri1'));window.open('', 'apiresults', 'width=450,height=300,status=yes,resizable=yes,scrollbars=yes');">
		<p class="explain">
			The HTTP method to be used is: 
			<input type="text" name="_method" value="POST" size="6" readonly="readonly" /><br />
			URI will be /command/{commandname} <br />
			Parameters:
			<a class="tooltip" href="#">systemid,
			<span class="custom info"><img src="testresources/images/Info.png" alt="State parameter" height="48" width="48" />
			<strong>systemid</strong><br />
			The System ID on which the command should be run.
			</span>
			</a>
			&nbsp;
			<a class="tooltip" href="#">nodeid,
			<span class="custom info"><img src="testresources/images/Info.png" alt="State parameter" height="48" width="48" />
			<strong>nodeid</strong><br />
			The node ID on which the command should be run.
			</span>
			</a>
			&nbsp;
			<a class="tooltip" href="#">state,
			<span class="custom info"><img src="testresources/images/Info.png" alt="State parameter" height="48" width="48" />
			<strong>state</strong><br />
			Optional state code for the required state of the node when the command
			is executed - if the node is not in the specified state, then the command
			will be reject with an error (HTTP code 409 Conflict).  If the state code
			is not specified, then the command will be run if possible.  The exact 
			steps may vary according to the actual node state.
			</span>
			</a>
			&nbsp;
			<a class="tooltip" href="#">username,
			<span class="custom info"><img src="testresources/images/Info.png" alt="State parameter" height="48" width="48" />
			<strong>username</strong><br />
			The username for the user who requested the command to be run.
			</span>
			</a>
			&nbsp;
			<a class="tooltip" href="#">icalentry,
			<span class="custom info"><img src="testresources/images/Info.png" alt="State parameter" height="48" width="48" />
			<strong>icalentry</strong><br />
			Must not be entered for an immediate command.  Required to create a scheduled command.
			If it is entered, it should be an iCalendar entry, with newlines changed to |.  This
			iCalendar entry will define a future schedule for running the command.  If the 
			iCalendar entry indicates that the command should already have been run, it will run
			immediately and then according to the schedule.
			</span>
			</a>
			&nbsp;
			<a class="tooltip" href="#">level,
			<span class="custom info"><img src="testresources/images/Info.png" alt="State parameter" height="48" width="48" />
			<strong>level</strong><br />
			Only applicable to a backup command.  Indicates whether a full or
			incremental backup is required.  1 = full, 2 = incremental.
			</span>
			</a>
			&nbsp;
			<a class="tooltip" href="#">parentid,
			<span class="custom info"><img src="testresources/images/Info.png" alt="State parameter" height="48" width="48" />
			<strong>parentid</strong><br />
			For an incremental backup, indicates the ID of the backup that is the
			base from which the increment is computed.  For a restore, indicates 
			the ID of the backup to be restored.
			</span>
			</a>
			&nbsp;
			<a class="tooltip" href="#">parameters,
			<span class="custom info"><img src="testresources/images/Info.png" alt="State parameter" height="48" width="48" />
			<strong>parameters</strong><br />
			The parameters for the command - command specific - individual
			parameters are separate from each other by |
			</span>
			</a><br />
		</p>
		<p class="formfields">
			<label for="commandname">Command Name</label>
			<select name="uri1" id="commandname">
				<option value="backup">Backup</option>
				<option value="restore">Restore</option>
				<option value="start">Start</option>
				<option value="stop">Stop</option>
				<option value="restart">Restart</option>
				<option value="isolate">Isolate</option>
				<option value="recover">Recover</option>
				<option value="promote">Promote</option>
			</select><br />
			<label for="systemc">System ID</label>
			<input type="text" name="systemid" id="systemc" /><br />
			<label for="nodec">Node ID</label>
			<input type="text" name="nodeid" id="nodec" /><br />
			<label for="statec">State of Node</label>
			<input type="text" ondblclick="unsetName(this.id);" onfocus="setName(this.id,'state');" id="statec" /><br />
			<label for="username">Username</label>
			<input type="text" name="username" id="username" /><br />
			<label for="icalentry">iCalEntry</label>
			<input type="text" id="icalentry" ondblclick="unsetName(this.id);" onfocus="setName(this.id,'icalentry');" /><br />
			<label for="level">Level (backup)</label>
			<input type="text" id="level" ondblclick="unsetName(this.id);" onfocus="setName(this.id,'level');" /><br />
			<label for="parentid">Parent ID (backup)</label>
			<input type="text"  id="parentid" ondblclick="unsetName(this.id);" onfocus="setName(this.id,'parentid');" /><br />
			<label for="params">Parameters</label>
			<input type="text" id="params" ondblclick="unsetName(this.id);" onfocus="setName(this.id,'parameters');" /><br />
			<input type="submit" class="submit" value="Run Command" />
			<input type="hidden" name="_accept" value="application/json" />
			<!-- The following two inputs will be set automatically -->
			<input type="hidden" name="HTTP_DATE" /><br />
			<input type="hidden" name="HTTP_AUTHORIZATION" />
		</p>
	  </form>
	  </div>
	  <div class="section">
	  <h3>Get One Task</h3>
	  <form action="" method="post" id="getjob" target="apiresults" onsubmit="return(setFields(this.id,'task','uri1'));window.open('', 'apiresults', 'width=450,height=300,status=yes,resizable=yes,scrollbars=yes');">
		<p class="explain">
			The HTTP method to be used is: 
			<input type="text" name="_method" value="GET" size="6" readonly="readonly" /><br />
			URI will be /task/{taskid} <br />
			Parameters:
			<a class="tooltip" href="#">fields<span class="custom info">
			<img src="testresources/images/Info.png" alt="Fields parameter" height="48" width="48" />
			<strong>fields</strong><br />
			A comma separated list of field names to be returned, others will be omitted.
			</span></a>
			<br />
		</p>
		<p class="formfields">
			<label for="task">Task ID</label>
			<input type="text" name="uri1" id="taskid" /><br />
			<label for="fields1s">Fields to return</label>
			<input type="text" name="fields" id="fields1s" /><br />
			<input type="submit" class="submit" value="Get Task" />
			<input type="hidden" name="_accept" value="application/json" />
			<!-- The following two inputs will be set automatically -->
			<input type="hidden" name="HTTP_DATE" /><br />
			<input type="hidden" name="HTTP_AUTHORIZATION" />
		</p>
	  </form>
	  </div>
	  <div class="section">
	  <h3>Get Multiple Tasks</h3>
	  <form action="" method="post" id="getjobs" target="apiresults" onsubmit="return(setFields(this.id,'task'));window.open('', 'apiresults', 'width=450,height=300,status=yes,resizable=yes,scrollbars=yes');">
		<p class="explain">
			The HTTP method to be used is: 
			<input type="text" name="_method" value="GET" size="6" readonly="readonly" /><br />
			URI will be /task <br />
			Parameters: state, nodeid, fields <br />
			<a class="tooltip" href="#">state,
			<span class="custom info"><img src="testresources/images/Info.png" alt="State parameter" height="48" width="48" />
			<strong>state</strong><br />
			Optional state code to filter results, with only tasks in the
			specified state being returned.
			</span>
			</a>
			&nbsp;
			<a class="tooltip" href="#">nodeid,
			<span class="custom info"><img src="testresources/images/Info.png" alt="State parameter" height="48" width="48" />
			<strong>nodeid</strong><br />
			Optional Node ID to filter results, with only tasks run on the
			specified node being returned.
			</span>
			</a>
			&nbsp;
			<a class="tooltip" href="#">fields<span class="custom info">
			<img src="testresources/images/Info.png" alt="Fields parameter" height="48" width="48" />
			<strong>fields</strong><br />
			A comma separated list of field names to be returned, others will be omitted.
			</span></a>
			<br />
		</p>
		<p class="formfields">
			<label for="statejms">State</label>
			<input type="text" id="statejms" ondblclick="unsetName(this.id);" onfocus="setName(this.id,'state');" /><br />
			<label for="nodejss">Node ID</label>
			<input type="text" id="nodejss" ondblclick="unsetName(this.id);" onfocus="setName(this.id,'nodeid');" /><br />
			<label for="fieldsms">Fields to return</label>
			<input type="text" name="fields" id="fieldsms" /><br />
			<input type="submit" class="submit" value="Get Tasks" />
			<input type="hidden" name="_accept" value="application/json" />
			<!-- The following two inputs will be set automatically -->
			<input type="hidden" name="HTTP_DATE" /><br />
			<input type="hidden" name="HTTP_AUTHORIZATION" />
		</p>
	  </form>
	  </div>
	  <div class="section">
	  <h3>Update a Task</h3>
	  <form action="" method="post" id="putjob" target="apiresults" onsubmit="return(setFields(this.id,'task','uri1'));window.open('', 'apiresults', 'width=450,height=300,status=yes,resizable=yes,scrollbars=yes');">
		<p class="explain">
			The HTTP method to be used is: 
			<input type="text" name="_method" value="PUT" size="6" readonly="readonly" /><br />
			URI will be /task/{taskid} <br />
			Parameters: state, pid, stepindex, completed<br />
		</p>
		<p class="formfields">
			<label for="tasku">Task ID</label>
			<input type="text" name="uri1" id="taskidu" /><br />
			<label for="statejus">State</label>
			<input type="text" id="statejus" ondblclick="unsetName(this.id);" onfocus="setName(this.id,'state');" /><br />
			<label for="pidjus">Process ID (PID)</label>
			<input type="text" id="pidjus" ondblclick="unsetName(this.id);" onfocus="setName(this.id,'pid');" /><br />
			<label for="stepjus">Step index</label>
			<input type="text" id="stepjus" ondblclick="unsetName(this.id);" onfocus="setName(this.id,'stepindex');" /><br />
			<label for="completedjus">Completed</label>
			<input type="text" id="completedjus" ondblclick="unsetName(this.id);" onfocus="setName(this.id,'completed');" /><br />
			<input type="submit" class="submit" value="Update Task" />
			<input type="hidden" name="_accept" value="application/json" />
			<!-- The following two inputs will be set automatically -->
			<input type="hidden" name="HTTP_DATE" /><br />
			<input type="hidden" name="HTTP_AUTHORIZATION" />
		</p>
	  </form>
	  </div>
	  <div class="section">
	  <h3>Get One Schedule</h3>
	  <form action="" method="post" id="getschedule" target="apiresults" onsubmit="return(setFields(this.id,'schedule','uri1'));window.open('', 'apiresults', 'width=450,height=300,status=yes,resizable=yes,scrollbars=yes');">
		<p class="explain">
			The HTTP method to be used is: 
			<input type="text" name="_method" value="GET" size="6" readonly="readonly" /><br />
			URI will be /schedule/{scheduleid} <br />
			Parameters:
			<a class="tooltip" href="#">fields<span class="custom info">
			<img src="testresources/images/Info.png" alt="Fields parameter" height="48" width="48" />
			<strong>fields</strong><br />
			A comma separated list of field names to be returned, others will be omitted.
			</span></a>
			<br />
		</p>
		<p class="formfields">
			<label for="schedule">Schedule ID</label>
			<input type="text" name="uri1" id="scheduleid" /><br />
			<label for="fields1">Fields to return</label>
			<input type="text" name="fields" id="fields1" /><br />
			<input type="submit" class="submit" value="Get Schedule" />
			<input type="hidden" name="_accept" value="application/json" />
			<!-- The following two inputs will be set automatically -->
			<input type="hidden" name="HTTP_DATE" /><br />
			<input type="hidden" name="HTTP_AUTHORIZATION" />
		</p>
	  </form>
	  </div>
	  <div class="section">
	  <h3>Get Multiple Schedules</h3>
	  <form action="" method="post" id="getschedules" target="apiresults" onsubmit="return(setFields(this.id,'schedule'));window.open('', 'apiresults', 'width=450,height=300,status=yes,resizable=yes,scrollbars=yes');">
		<p class="explain">
			The HTTP method to be used is: 
			<input type="text" name="_method" value="GET" size="6" readonly="readonly" /><br />
			URI will be /schedule <br />
			Parameters: 
			<a class="tooltip" href="#">nodeid,
			<span class="custom info"><img src="testresources/images/Info.png" alt="State parameter" height="48" width="48" />
			<strong>nodeid</strong><br />
			Optional Node ID to filter results, with only schedules run on the
			specified node being returned.
			</span>
			</a>
			&nbsp;
			<a class="tooltip" href="#">fields<span class="custom info">
			<img src="testresources/images/Info.png" alt="Fields parameter" height="48" width="48" />
			<strong>fields</strong><br />
			A comma separated list of field names to be returned, others will be omitted.
			</span></a>
			<br />
		</p>
		<p class="formfields">
			<label for="nodejs">Node ID</label>
			<input type="text" id="nodejs" ondblclick="unsetName(this.id);" onfocus="setName(this.id,'nodeid');" /><br />
			<label for="fieldsm">Fields to return</label>
			<input type="text" name="fields" id="fieldsm" /><br />
			<input type="submit" class="submit" value="Get Schedules" />
			<input type="hidden" name="_accept" value="application/json" />
			<!-- The following two inputs will be set automatically -->
			<input type="hidden" name="HTTP_DATE" /><br />
			<input type="hidden" name="HTTP_AUTHORIZATION" />
		</p>
	  </form>
	  </div>
	  <div class="section">
	  <h3>Update a Schedule</h3>
	  <form action="" method="post" id="putschedule" target="apiresults" onsubmit="return(setFields(this.id,'schedule','uri1'));window.open('', 'apiresults', 'width=450,height=300,status=yes,resizable=yes,scrollbars=yes');">
		<p class="explain">
			The HTTP method to be used is: 
			<input type="text" name="_method" value="PUT" size="6" readonly="readonly" /><br />
			URI will be /schedule/{scheduleid} <br />
			Parameters: icalentry, parameters<br />
		</p>
		<p class="formfields">
			<label for="scheduleu">Schedule ID</label>
			<input type="text" name="uri1" id="scheduleidu" /><br />
			<label for="icalentryu">iCalEntry</label>
			<input type="text" id="icalentryu" ondblclick="unsetName(this.id);" onfocus="setName(this.id,'icalentry');" /><br />
			<label for="parametersu">Parameters</label>
			<input type="text" id="parametersu" ondblclick="unsetName(this.id);" onfocus="setName(this.id,'parameters');" /><br />
			<input type="submit" class="submit" value="Update Schedule" />
			<input type="hidden" name="_accept" value="application/json" />
			<!-- The following two inputs will be set automatically -->
			<input type="hidden" name="HTTP_DATE" /><br />
			<input type="hidden" name="HTTP_AUTHORIZATION" />
		</p>
	  </form>
	  </div>
	  <div class="section">
	  <h3>Delete a Schedule</h3>
	  <form action="" method="post" id="delschedule" target="apiresults" onsubmit="return(setFields(this.id,'schedule','uri1'));window.open('', 'apiresults', 'width=450,height=300,status=yes,resizable=yes,scrollbars=yes');">
		<p class="explain">
			The HTTP method to be used is: 
			<input type="text" name="_method" value="DELETE" size="6" readonly="readonly" /><br />
			URI will be /schedule/{scheduleid} <br />
			Parameters: none<br />
		</p>
		<p class="formfields">
			<label for="scheduled">Schedule ID</label>
			<input type="text" name="uri1" id="scheduleidd" /><br />
			<input type="submit" class="submit" value="Delete Schedule" />
			<input type="hidden" name="_accept" value="application/json" />
			<!-- The following two inputs will be set automatically -->
			<input type="hidden" name="HTTP_DATE" /><br />
			<input type="hidden" name="HTTP_AUTHORIZATION" />
		</p>
	  </form>
	  </div>
	  <div class="section">
	  <h3>Get Bucket Data</h3>
	  <form action="" method="post" id="getbucket" target="apiresults" onsubmit="return(setFields(this.id,'bucket'));window.open('', 'apiresults', 'width=450,height=300,status=yes,resizable=yes,scrollbars=yes');">
		<p class="explain">
			The HTTP method to be used is: 
			<input type="text" name="_method" value="GET" size="6" readonly="readonly" /><br />
			URI will be /bucket <br />
			Parameters: bucket, object <br />
		</p>
		<p class="formfields">
			<label for="bucket">Bucket</label>
			<input type="text" name="bucket" id="bucket" /><br />
			<label for="object">Object</label>
			<input type="text" name="object" id="object" /><br />
			<input type="submit" class="submit" value="Get Data" />
			<input type="hidden" name="_accept" value="application/json" />
			<!-- The following two inputs will be set automatically -->
			<input type="hidden" name="HTTP_DATE" /><br />
			<input type="hidden" name="HTTP_AUTHORIZATION" />
		</p>
	  </form>
	  </div>
	  <div class="section">
	  <h3>Run SQL to get information</h3>
	  <form action="" method="post" id="runsql" target="apiresults" onsubmit="return(setFields(this.id,'runsql'));window.open('', 'apiresults', 'width=450,height=300,status=yes,resizable=yes,scrollbars=yes');">
		<p class="explain">
			The HTTP method to be used is: 
			<input type="text" name="_method" value="GET" size="6" readonly="readonly" /><br />
			URI will be /runsql <br />
			Parameters: SQL request (SELECT or SHOW), systemid, nodeid, aspairs, fields <br />
		</p>
		<p class="formfields">
			<label for="sql">SQL</label>
			<input type="text" name="sql" id="sql" /><br />
			<label for="systemq">System ID</label>
			<input type="text" name="systemid" id="systemq" /><br />
			<label for="nodeq">Node ID</label>
			<input type="text" name="nodeid" id="nodeq" /><br />
			<label for="aspairs">Results paired</label>
			<input type="text" name="aspairs" id="aspairs" /><br />
			<label for="fieldsq">Fields to return</label>
			<input type="text" name="fields" id="fieldsq" /><br />
			<input type="submit" class="submit" value="Run SQL" />
			<input type="hidden" name="_accept" value="application/json" />
			<!-- The following two inputs will be set automatically -->
			<input type="hidden" name="HTTP_DATE" /><br />
			<input type="hidden" name="HTTP_AUTHORIZATION" />
		</p>
	  </form>
	  </div>
	  </div>
	  </div>
		<script type="text/javascript" src="testresources/js/md5.js"></script>
		<script type="text/javascript" src="testresources/js/testapi.js"></script>
    </body>
</html>
